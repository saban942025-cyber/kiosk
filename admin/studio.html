<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sika Studio - × ×™×”×•×œ ×”××•×—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Heebo', sans-serif; background: #111; color: white; padding: 40px; }
        .card { background: #222; border: 1px solid #333; padding: 25px; border-radius: 20px; margin-bottom: 20px; }
        .input-dark { background: #000; border: 1px solid #444; color: white; padding: 12px; border-radius: 10px; width: 100%; display: block; margin-top: 5px; }
        .label { font-size: 12px; color: #888; font-weight: bold; text-transform: uppercase; margin-top: 15px; display: block; }
    </style>
</head>
<body class="max-w-4xl mx-auto">

    <header class="flex justify-between items-center mb-10 border-b border-gray-800 pb-6">
        <div>
            <h1 class="text-4xl font-black text-[#FFC500]">Sika Studio ğŸ›ï¸</h1>
            <p class="text-gray-400">××—×•×‘×¨ ×œ×××’×¨: <span class="text-blue-400">saban942025-cyber.github.io/kiosk</span></p>
        </div>
        <div class="flex gap-4">
            <button onclick="downloadBrain()" class="bg-green-600 text-white px-6 py-3 rounded-full font-bold hover:bg-green-500 flex items-center gap-2">
                <i data-lucide="download"></i> ×©××•×¨ ×•×”×•×¨×“ brain.json
            </button>
            <a href="../index.html" target="_blank" class="bg-white text-black px-6 py-3 rounded-full font-bold hover:bg-gray-200">×¤×ª×— ×§×™×•×¡×§ >></a>
        </div>
    </header>

    <div class="grid grid-cols-2 gap-8">
        <div class="card border-yellow-600/50 col-span-2">
            <h2 class="text-xl font-bold mb-6 text-[#FFC500] flex items-center gap-2"><i data-lucide="package-plus"></i> ×”×•×¡×¤×ª ××•×¦×¨ ×œ××•×—</h2>
            <div class="flex gap-8">
                <div class="w-1/3">
                    <label class="label">×ª××•× ×ª ××•×¦×¨ (URL)</label>
                    <input id="pImg" class="input-dark" placeholder="https://..." onchange="document.getElementById('preview').src = this.value">
                    <img id="preview" src="https://placehold.co/400?text=Preview" class="w-full h-40 object-contain mt-4 bg-white rounded-lg">
                </div>
                <div class="w-2/3">
                    <label class="label">×©× ×”××•×¦×¨</label>
                    <input id="pName" class="input-dark" placeholder="×œ××©×œ: Sika Ceram 255">
                    
                    <div class="grid grid-cols-2 gap-4 mt-2">
                        <div>
                            <label class="label">××•×ª×’</label>
                            <select id="pBrand" class="input-dark">
                                <option>SIKA</option>
                                <option>THERMOKIR</option>
                                <option>MISTER FIX</option>
                            </select>
                        </div>
                        <div>
                            <label class="label">×§×˜×’×•×¨×™×”</label>
                            <select id="pCat" class="input-dark">
                                <option value="sealing">××™×˜×•×</option>
                                <option value="glues">×“×‘×§×™×</option>
                                <option value="flooring">×¨×™×¦×•×£</option>
                            </select>
                        </div>
                    </div>
                    
                    <label class="label">×ª×™××•×¨ ×©×™×•×•×§×™</label>
                    <textarea id="pDesc" class="input-dark h-24"></textarea>
                    
                    <button onclick="addProduct()" class="w-full bg-[#E3000F] text-white py-3 rounded-xl font-bold mt-4 hover:bg-red-600">×”×•×¡×£ ×œ×××’×¨ ×”××§×•××™</button>
                </div>
            </div>
        </div>

        <div class="card col-span-2">
            <h2 class="text-xl font-bold mb-4">××•×¦×¨×™× ×§×™×™××™× ×‘××•×— (<span id="count">0</span>)</h2>
            <div id="productsList" class="grid grid-cols-4 gap-4 max-h-96 overflow-y-auto pr-2"></div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        let brainData = { config: {}, products: [] };

        // ×˜×¢×™× ×” ×¨××©×•× ×™×ª ×©×œ ×”××•×— ×”×§×™×™×
        async function loadBrain() {
            try {
                const res = await fetch('../brain.json');
                if(res.ok) {
                    brainData = await res.json();
                    renderList();
                }
            } catch(e) { console.log("Starting fresh brain"); }
        }

        function addProduct() {
            const product = {
                id: Date.now(),
                name: document.getElementById('pName').value,
                brand: document.getElementById('pBrand').value,
                category: document.getElementById('pCat').value,
                marketingDesc: document.getElementById('pDesc').value,
                image: document.getElementById('pImg').value
            };
            
            brainData.products.unshift(product);
            renderList();
            alert("×”××•×¦×¨ × ×•×¡×£ ×œ×¨×©×™××”! ××œ ×ª×©×›×— ×œ×”×•×¨×™×“ ××ª ×”×§×•×‘×¥ ×•×œ×¢×“×›×Ÿ ×‘-GitHub.");
            
            // Clear fields
            document.getElementById('pName').value = "";
            document.getElementById('pDesc').value = "";
            document.getElementById('pImg').value = "";
        }

        function renderList() {
            document.getElementById('count').innerText = brainData.products.length;
            const list = document.getElementById('productsList');
            list.innerHTML = brainData.products.map((p, i) => `
                <div class="bg-black p-3 rounded-lg border border-gray-800 relative group">
                    <img src="${p.image}" class="h-20 w-full object-contain mb-2 bg-white rounded">
                    <div class="font-bold text-sm truncate">${p.name}</div>
                    <button onclick="removeProduct(${i})" class="absolute top-2 right-2 bg-red-600 p-1 rounded text-white opacity-0 group-hover:opacity-100 transition"><i data-lucide="trash" size="14"></i></button>
                </div>
            `).join('');
            lucide.createIcons();
        }

        window.removeProduct = (index) => {
            brainData.products.splice(index, 1);
            renderList();
        }

        function downloadBrain() {
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(brainData, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", "brain.json");
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
            alert("×§×•×‘×¥ brain.json ×™×¨×“ ×œ××—×©×‘!\n×¢×›×©×™×• ×’×¨×•×¨ ××•×ª×• ×œ×ª×™×§×™×™×” ×‘-GitHub ×›×“×™ ×œ×¢×“×›×Ÿ ××ª ×”××ª×¨.");
        }

        loadBrain();
    </script>
</body>
</html>
